'use client'
import React, { useState, useEffect } from 'react'
import { useDebounce } from '@/environments/useDebounce'
import { useRouter } from 'next/navigation'
import { VanishInput } from '../ui/vanish-input'

export const Search: React.FC = () => {
  const [value, setValue] = useState('')
  const router = useRouter()

  const debouncedValue = useDebounce(value)

  useEffect(() => {
    router.push(`/search${debouncedValue ? `?q=${debouncedValue}` : ''}`)
  }, [debouncedValue, router])

  return (
    <div className="h-fit flex flex-col justify-center  items-center px-4">
      <h2 className="mb-10 sm:mb-20 text-xl text-center sm:text-5xl dark:text-white text-black">
        Search
      </h2>
      <VanishInput
        placeholders={['search', 'pages', 'blogs']}
        onChange={(event) => {
          setValue(event.target.value)
        }}
        onSubmit={(e) => e.preventDefault()}
      />
    </div>
  )
}
